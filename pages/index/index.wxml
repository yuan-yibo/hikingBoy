<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ¬¢è¿åŒº -->
  <view class="header">
    <view class="welcome-card" style="background: linear-gradient(135deg, {{themeColors.primary}} 0%, {{themeColors.primaryLight}} 100%);">
      <view class="welcome-text">ğŸ”ï¸ å’Œå®è´çš„çˆ¬å±±æ—¶å…‰</view>
      <view class="welcome-subtitle">è®°å½•æ¯ä¸€æ¬¡å¿«ä¹çš„æ—…ç¨‹</view>
    </view>
  </view>

  <!-- è®°å½•åˆ—è¡¨ -->
  <view class="records-container">
    <block wx:if="{{records.length > 0}}">
      <view 
        wx:for="{{records}}" 
        wx:key="_id" 
        class="record-card {{item.animation ? 'fade-in' : ''}}"
        bindtap="goToDetail"
        data-id="{{item._id}}"
      >
        <!-- ç…§ç‰‡åŒºåŸŸ -->
        <view class="photo-area" wx:if="{{item.photos && item.photos.length > 0}}">
          <image class="photo" src="{{item.photos[0]}}" mode="aspectFill"></image>
          <view class="photo-count" wx:if="{{item.photos.length > 1}}">
            ğŸ“· {{item.photos.length}}
          </view>
        </view>
        <view class="photo-area no-photo" wx:else style="background: {{themeColors.cardGradient}};">
          <text class="no-photo-icon">ğŸ”ï¸</text>
        </view>

        <!-- å†…å®¹åŒºåŸŸ -->
        <view class="content-area">
          <view class="mountain-name">{{item.mountainName}}</view>
          <view class="date-time">
            <text class="icon">ğŸ“…</text> {{item.date}}
            <text class="distance" wx:if="{{item.distance}}">ğŸ“ {{item.distance}}km</text>
            <text class="duration" wx:if="{{item.duration}}">â±ï¸ {{item.duration}}</text>
          </view>
          <view class="weather" wx:if="{{item.weather}}">
            <text class="icon">{{item.weatherIcon}}</text> {{item.weather}}
          </view>
          <view class="note-preview" wx:if="{{item.notes}}">{{item.notes}}</view>
        </view>

        <!-- æ“ä½œæŒ‰é’® -->
        <view class="action-btns">
          <view class="edit-btn" catchtap="editRecord" data-id="{{item._id}}">âœï¸</view>
          <view class="delete-btn" catchtap="deleteRecord" data-id="{{item._id}}">ğŸ—‘</view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <view class="empty-icon">ğŸ”ï¸</view>
      <view class="empty-text">è¿˜æ²¡æœ‰è®°å½•å“¦</view>
      <view class="empty-subtext">å¼€å§‹è®°å½•ä½ å’Œå®è´çš„çˆ¬å±±æ—¶å…‰å§ï¼</view>
    </view>
  </view>

  <!-- æµ®åŠ¨æ·»åŠ æŒ‰é’® -->
  <view class="fab" bindtap="addRecord" style="background: linear-gradient(135deg, {{themeColors.primary}} 0%, {{themeColors.primaryLight}} 100%); box-shadow: 0 12rpx 48rpx {{themeColors.shadow}};">
    <text class="fab-icon">â•</text>
  </view>
</view>
